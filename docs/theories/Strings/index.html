<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-theories/Strings" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Strings | Online Z3 Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/z3guide/docs/theories/Strings"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Strings | Online Z3 Guide"><meta data-rh="true" name="description" content="SMTLIB2 standard The theory of unicode strings"><meta data-rh="true" property="og:description" content="SMTLIB2 standard The theory of unicode strings"><link data-rh="true" rel="icon" href="/z3guide/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/z3guide/docs/theories/Strings"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/z3guide/docs/theories/Strings" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/z3guide/docs/theories/Strings" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WELUFTGVJI-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Online Z3 Guide" href="/z3guide/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/z3guide/coi-serviceworker.js" defer="defer"></script>
<script src="/z3guide/z3-built.js" defer="defer"></script><link rel="stylesheet" href="/z3guide/assets/css/styles.2df09eaf.css">
<script src="/z3guide/assets/js/runtime~main.9722d945.js" defer="defer"></script>
<script src="/z3guide/assets/js/main.47507a72.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/z3guide/"><b class="navbar__title text--truncate">Z3 Guide</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/z3guide/docs/logic/intro">SMTLIB Tutorial</a><a class="navbar__item navbar__link" href="/z3guide/programming/Z3 JavaScript Examples">Programming Z3</a><a class="navbar__item navbar__link" href="/z3guide/playground/Freeform Editing">Playground</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/z3guide" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/z3guide/docs/logic/intro">Logic</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/basiccommands">Basic Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/propositional-logic">Propositional Logic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/Uninterpreted-functions-and-constants">Uninterpreted Functions and Constants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/Quantifiers">Quantifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/Lambdas">Lambdas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/Recursive Functions">Recursive Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/logic/Conclusion">Conclusion</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/z3guide/docs/theories/Arithmetic">Theories</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Arithmetic">Arithmetic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Bitvectors">Bitvectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/IEEE Floats">IEEE Floats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Arrays">Arrays</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Datatypes">Datatypes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/z3guide/docs/theories/Strings">Strings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Sequences">Sequences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Regular Expressions">Regular Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Characters">Unicode Characters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/docs/theories/Special Relations">Special Relations</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/z3guide/docs/strategies/intro">Strategies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/z3guide/docs/optimization/intro">Optimization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/z3guide/docs/fixedpoints/intro">FixedPoints</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/z3guide/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Theories</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Strings</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Strings</h1></header><blockquote>
<p><strong>SMTLIB2 standard</strong> <a href="https://smt-lib.org/theories-UnicodeStrings.shtml" target="_blank" rel="noopener noreferrer">The theory of unicode strings</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>This section describes Z3&#x27;s handling of strings.
Strings are represented as a sequence of Characters where the default character sort is Unicode.
You can reason about regular expressions of sequences.
Sequences over elements other than Unicode characters and regular expressions are described in separate sections.
Z3 offers built-in support for
using string constants and dedicated solvers for checking
satisfiability over constraints using strings and sequences.
Note that the (current) specialized solver is able to establish
satisfiability for a non-trivial class of formulas, but is far from
a decision procedure even for fragments of string equalities that can be decided:
Z3 only solves string equalities using an incomplete
heuristic solver
and the full combination of lengths and sequences
(and regular expressions) is not decidable anyway.
In Z3, strings are a special case of sequences, and for the case of Unicode strings,
and regular expressions over Unicode strings seeks to implement the <a href="https://smt-lib.org/theories-UnicodeStrings.shtml" target="_blank" rel="noopener noreferrer">SMTLIB2 standard</a>.</p>
<p>You can configure z3 to use one of two backends for solving strings.
The default backend is called the <code>seq</code> solver. It solves constraints over both sequences and strings.
The other backend is <a href="https://z3string.github.io/" target="_blank" rel="noopener noreferrer">z3str3</a>, which applies to strings and regular expressions over strings.
Extensions to sequences operations are not supported in z3str3.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="string-constraints-by-example">String Constraints by Example<a href="#string-constraints-by-example" class="hash-link" aria-label="Direct link to String Constraints by Example" title="Direct link to String Constraints by Example">​</a></h2>
<p>Strings <code>a, b, c</code> can have a non-trivial overlap.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>There is a solution to <code>a</code> that is not a sequence of &quot;a&quot;&#x27;s.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-strings">Creating Strings<a href="#creating-strings" class="hash-link" aria-label="Direct link to Creating Strings" title="Direct link to Creating Strings">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-types-and-constants">Built-in types and constants<a href="#built-in-types-and-constants" class="hash-link" aria-label="Direct link to Built-in types and constants" title="Direct link to Built-in types and constants">​</a></h3>
<p>The name <code>String</code> is a built-in name for the String sort.
String literals can furthermore be entered directly as literals
delimited by quotes. The following example asks whether there are
strings <code>a</code> and <code>b</code> that concatenate to <code>&quot;abc&quot;</code>
followed by <code>b</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="string-literals">String literals<a href="#string-literals" class="hash-link" aria-label="Direct link to String literals" title="Direct link to String literals">​</a></h3>
<p>To represent non-ASCII characters the SMTLIB2 standard uses unicode escape sequences.
The escape sequences are of the form <code>\u{d₀}</code>, <code>\u{d₁d₀}</code>, <code>\u{d₂d₁d₀}</code>, <code>\u{d₃d₂d₁d₀}</code>, <code>\u{d₄d₃d₂d₁d₀}</code>, <code>\ud₃d₂d₁d₀</code>
where <code>d</code> is a hexadecimal digit. Other
characters are treated as part of the string. For example, a newline within a string
is treated as a new-line character.</p>
<p>The following example shows
three ways to enter the newline character.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="string-operations-by-example">String Operations by example<a href="#string-operations-by-example" class="hash-link" aria-label="Direct link to String Operations by example" title="Direct link to String Operations by example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="str-a-b-c---string-concatenation"><code>(str.++ a b c)</code> - String concatenation<a href="#str-a-b-c---string-concatenation" class="hash-link" aria-label="Direct link to str-a-b-c---string-concatenation" title="Direct link to str-a-b-c---string-concatenation">​</a></h3>
<p>A string cannot overlap with two different characters.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strlen-s---the-length-of-string-s"><code>(str.len s)</code> - the length of string <code>s</code><a href="#strlen-s---the-length-of-string-s" class="hash-link" aria-label="Direct link to strlen-s---the-length-of-string-s" title="Direct link to strlen-s---the-length-of-string-s">​</a></h3>
<p>There is a solution to <code>a</code> of length at most 2.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strat-s-offset---character-substring-at-offset"><code>(str.at s offset)</code> - character substring at offset<a href="#strat-s-offset---character-substring-at-offset" class="hash-link" aria-label="Direct link to strat-s-offset---character-substring-at-offset" title="Direct link to strat-s-offset---character-substring-at-offset">​</a></h3>
<p>The substring is of length 1 if <code>offset</code> is within the bounds of <code>s</code>, otherwise the result is the empty string.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Note that <code>str.at</code> does not result in a character but a string of length one.
You can use <code>(seq.nth &quot;abc&quot; 1)</code> to access the character at offset 1.
The function <code>seq.nth</code> is not part of the SMTLIB2 format for strings.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strindexof-s-sub-offset---first-position-of-substring"><code>(str.indexof s sub [offset])</code> - first position of substring<a href="#strindexof-s-sub-offset---first-position-of-substring" class="hash-link" aria-label="Direct link to strindexof-s-sub-offset---first-position-of-substring" title="Direct link to strindexof-s-sub-offset---first-position-of-substring">​</a></h3>
<p>The result is the first position of <code>sub</code> in <code>s</code>, -1 if there are no occurrence.
The offset argument is optional. No offset corresponds to the offset 0.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strsubstr-s-offset-length---substring-at-a-given-offset"><code>(str.substr s offset length)</code> - substring at a given offset<a href="#strsubstr-s-offset-length---substring-at-a-given-offset" class="hash-link" aria-label="Direct link to strsubstr-s-offset-length---substring-at-a-given-offset" title="Direct link to strsubstr-s-offset-length---substring-at-a-given-offset">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strcontains-a-b---string-containment"><code>(str.contains a b)</code> - string containment<a href="#strcontains-a-b---string-containment" class="hash-link" aria-label="Direct link to strcontains-a-b---string-containment" title="Direct link to strcontains-a-b---string-containment">​</a></h3>
<p>Contains is transitive.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>But containment is not a linear order.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strprefixof-a-b-strsuffixof-a-b---prefix-and-suffix-checks"><code>(str.prefixof a b)</code> <code>(str.suffixof a b)</code> - prefix and suffix checks<a href="#strprefixof-a-b-strsuffixof-a-b---prefix-and-suffix-checks" class="hash-link" aria-label="Direct link to strprefixof-a-b-strsuffixof-a-b---prefix-and-suffix-checks" title="Direct link to strprefixof-a-b-strsuffixof-a-b---prefix-and-suffix-checks">​</a></h3>
<p>Every string is equal to the prefix and suffix that add up to a its length.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strfrom_int-i-strto_int-s---convert-to-and-from-non-negative-integers"><code>(str.from_int i)</code> <code>(str.to_int s)</code> - convert to and from non-negative integers<a href="#strfrom_int-i-strto_int-s---convert-to-and-from-non-negative-integers" class="hash-link" aria-label="Direct link to strfrom_int-i-strto_int-s---convert-to-and-from-non-negative-integers" title="Direct link to strfrom_int-i-strto_int-s---convert-to-and-from-non-negative-integers">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="str-s-t-str-s-t---lexicographic-string-comparison"><code>(str.&lt; s t)</code> <code>(str.&lt;= s t)</code> - lexicographic string comparison<a href="#str-s-t-str-s-t---lexicographic-string-comparison" class="hash-link" aria-label="Direct link to str-s-t-str-s-t---lexicographic-string-comparison" title="Direct link to str-s-t-str-s-t---lexicographic-string-comparison">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stris_digit-s---test-if-string-represents-a-digit"><code>(str.is_digit s)</code> - test if string represents a digit<a href="#stris_digit-s---test-if-string-represents-a-digit" class="hash-link" aria-label="Direct link to stris_digit-s---test-if-string-represents-a-digit" title="Direct link to stris_digit-s---test-if-string-represents-a-digit">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strto_code-s-strfrom_code-i---character-codes"><code>(str.to_code s)</code> <code>(str.from_code i)</code> - character codes<a href="#strto_code-s-strfrom_code-i---character-codes" class="hash-link" aria-label="Direct link to strto_code-s-strfrom_code-i---character-codes" title="Direct link to strto_code-s-strfrom_code-i---character-codes">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="_-char-n---string-from-a-character-code"><code>(_ char n)</code> - string from a character code<a href="#_-char-n---string-from-a-character-code" class="hash-link" aria-label="Direct link to _-char-n---string-from-a-character-code" title="Direct link to _-char-n---string-from-a-character-code">​</a></h3>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Note that after <code>(_ char 54)</code> is the same as <code>(simplify (str.from_code 54))</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-of-operations">Summary of Operations<a href="#summary-of-operations" class="hash-link" aria-label="Direct link to Summary of Operations" title="Direct link to Summary of Operations">​</a></h2>
<table><thead><tr><th>Operation</th><th>Brief description</th></tr></thead><tbody><tr><td><code>(str.++ a b c)</code></td><td>String concatenation of one or more strings</td></tr><tr><td><code>(str.len s)</code></td><td>String length. Returns an integer</td></tr><tr><td><code>(str.substr s offset length)</code></td><td>Retrieves substring of <code>s</code> at <code>offset</code></td></tr><tr><td><code>(str.indexof s sub)</code></td><td>Retrieves first position of <code>sub</code> in <code>s</code>, -1 if there are no occurrences</td></tr><tr><td><code>(str.indexof s sub offset)</code></td><td>Retrieves first position of <code>sub</code> at or after <code>offset</code> in <code>s</code>, -1 if there are no occurrences</td></tr><tr><td><code>(str.at s offset)</code></td><td>Substring of length 1 at <code>offset</code> in <code>s</code></td></tr><tr><td><code>(str.contains s sub)</code></td><td>Does <code>s</code> contain the substring <code>sub</code>?</td></tr><tr><td><code>(str.prefixof pre s)</code></td><td>Is <code>pre</code> a prefix of <code>s</code>?</td></tr><tr><td><code>(str.suffixof suf s)</code></td><td>Is <code>suf</code> a suffix of <code>s</code>?</td></tr><tr><td><code>(str.replace s src dst)</code></td><td>Replace the first occurrence of <code>src</code> by <code>dst</code> in <code>s</code></td></tr><tr><td><code>(str.to_int s)</code></td><td>Retrieve integer encoded by string <code>s</code></td></tr><tr><td><code>(str.from_int i)</code></td><td>Retrieve string encoding of integer <code>i</code></td></tr><tr><td><code>(str.&lt; s1 s2)</code></td><td>Lexicographic string less than</td></tr><tr><td><code>(str.&lt;= s1 s2)</code></td><td>Lexicographic string less or equal to</td></tr><tr><td><code>(_ char ch)</code></td><td>Unit string from unicode character code</td></tr><tr><td><code>(str.is_digit s)</code></td><td>A predicate whether string is a one of the digits 0 to 9</td></tr><tr><td><code>(str.to_code s)</code></td><td>Convert string of length one to the character code (an integer). Produce -1 if the string is not of length 1</td></tr><tr><td><code>(str.from_code i)</code></td><td>Convert an integer in the range of valid Unicode to a string of length one</td></tr><tr><td><code>(str.replace_all s src dst)</code></td><td>Currently not supported: replace all occurrences of <code>s</code> in <code>src</code> by <code>dst</code></td></tr></tbody></table>
<p>Note that <code>(str.indexof s offset)</code> is shorthand for <code>(str.indexof s offset 0)</code>.
Also, note that  <code>(str.at s i)</code> is the empty string or sequence for indices that are either negative or beyond
<code>(- (str.len s) 1)</code>. Furthermore <code>(str.substr s offset length)</code> is empty
when the offset is outside the range of positions in <code>s</code> or <code>length</code> is negative or
<code>offset+length</code> exceeds the length of <code>s</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/z3guide/tree/main/website/docs-smtlib/02 - theories/06 - Strings.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/z3guide/docs/theories/Datatypes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Datatypes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/z3guide/docs/theories/Sequences"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sequences</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#string-constraints-by-example" class="table-of-contents__link toc-highlight">String Constraints by Example</a></li><li><a href="#creating-strings" class="table-of-contents__link toc-highlight">Creating Strings</a><ul><li><a href="#built-in-types-and-constants" class="table-of-contents__link toc-highlight">Built-in types and constants</a></li><li><a href="#string-literals" class="table-of-contents__link toc-highlight">String literals</a></li></ul></li><li><a href="#string-operations-by-example" class="table-of-contents__link toc-highlight">String Operations by example</a><ul><li><a href="#str-a-b-c---string-concatenation" class="table-of-contents__link toc-highlight"><code>(str.++ a b c)</code> - String concatenation</a></li><li><a href="#strlen-s---the-length-of-string-s" class="table-of-contents__link toc-highlight"><code>(str.len s)</code> - the length of string <code>s</code></a></li><li><a href="#strat-s-offset---character-substring-at-offset" class="table-of-contents__link toc-highlight"><code>(str.at s offset)</code> - character substring at offset</a></li><li><a href="#strindexof-s-sub-offset---first-position-of-substring" class="table-of-contents__link toc-highlight"><code>(str.indexof s sub [offset])</code> - first position of substring</a></li><li><a href="#strsubstr-s-offset-length---substring-at-a-given-offset" class="table-of-contents__link toc-highlight"><code>(str.substr s offset length)</code> - substring at a given offset</a></li><li><a href="#strcontains-a-b---string-containment" class="table-of-contents__link toc-highlight"><code>(str.contains a b)</code> - string containment</a></li><li><a href="#strprefixof-a-b-strsuffixof-a-b---prefix-and-suffix-checks" class="table-of-contents__link toc-highlight"><code>(str.prefixof a b)</code> <code>(str.suffixof a b)</code> - prefix and suffix checks</a></li><li><a href="#strfrom_int-i-strto_int-s---convert-to-and-from-non-negative-integers" class="table-of-contents__link toc-highlight"><code>(str.from_int i)</code> <code>(str.to_int s)</code> - convert to and from non-negative integers</a></li><li><a href="#str-s-t-str-s-t---lexicographic-string-comparison" class="table-of-contents__link toc-highlight"><code>(str.&lt; s t)</code> <code>(str.&lt;= s t)</code> - lexicographic string comparison</a></li><li><a href="#stris_digit-s---test-if-string-represents-a-digit" class="table-of-contents__link toc-highlight"><code>(str.is_digit s)</code> - test if string represents a digit</a></li><li><a href="#strto_code-s-strfrom_code-i---character-codes" class="table-of-contents__link toc-highlight"><code>(str.to_code s)</code> <code>(str.from_code i)</code> - character codes</a></li><li><a href="#_-char-n---string-from-a-character-code" class="table-of-contents__link toc-highlight"><code>(_ char n)</code> - string from a character code</a></li></ul></li><li><a href="#summary-of-operations" class="table-of-contents__link toc-highlight">Summary of Operations</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Z3</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://z3prover.github.io/papers/programmingz3.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Programming Z3 in Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Z3Prover/z3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Z3 on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/z3guide/Acknowledgments">Acknowledgments</a></li></ul></div><div class="col footer__col"><div class="footer__title">Z3 Material</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://z3prover.github.io/api/html/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li><li class="footer__item"><a href="https://z3prover.github.io/slides" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slides<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/z3prover/z3/wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Stay Connected</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/z3guide" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/RiSE_MSR" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/research/group/research-software-engineering-rise/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RiSE @ MSR<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy &amp; Cookies<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/copyright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a href="https://github.com/microsoft/z3guide/commit/37bf175cf39aedc7cf3ae55661f2b445760ce1be" target="_blank" rel="noopener noreferrer">37bf175c</a> | <a href="https://www.npmjs.com/package/z3-solver/v/4.12.1" target="_blank" rel="noopener noreferrer">z3-solver 4.12.1</a> | Copyright © 2025 Microsoft Corporation.</div></div></div></footer></div>
</body>
</html>