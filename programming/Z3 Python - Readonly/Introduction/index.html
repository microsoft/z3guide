<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-programming docs-version-current docs-doc-page docs-doc-id-Z3 Python - Readonly/Introduction" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Introduction | Online Z3 Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/z3guide/programming/Z3 Python - Readonly/Introduction"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-programming-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-programming-current"><meta data-rh="true" property="og:title" content="Introduction | Online Z3 Guide"><meta data-rh="true" name="description" content="This tutorial demonstrates the main capabilities of Z3Py: the Z3 API in Python. There are many benefits to using, Z3Py. First, it is much more familiar to individuals who have seen programming languages before, but have never seen functional languages like Z3."><meta data-rh="true" property="og:description" content="This tutorial demonstrates the main capabilities of Z3Py: the Z3 API in Python. There are many benefits to using, Z3Py. First, it is much more familiar to individuals who have seen programming languages before, but have never seen functional languages like Z3."><link data-rh="true" rel="icon" href="/z3guide/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/z3guide/programming/Z3 Python - Readonly/Introduction"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/z3guide/programming/Z3 Python - Readonly/Introduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/z3guide/programming/Z3 Python - Readonly/Introduction" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WELUFTGVJI-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Online Z3 Guide" href="/z3guide/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/z3guide/coi-serviceworker.js" defer="defer"></script>
<script src="/z3guide/z3-built.js" defer="defer"></script><link rel="stylesheet" href="/z3guide/assets/css/styles.2df09eaf.css">
<script src="/z3guide/assets/js/runtime~main.f295e47d.js" defer="defer"></script>
<script src="/z3guide/assets/js/main.af1fa55e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/z3guide/"><b class="navbar__title text--truncate">Z3 Guide</b></a><a class="navbar__item navbar__link" href="/z3guide/docs/logic/intro">SMTLIB Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/z3guide/programming/Z3 JavaScript Examples">Programming Z3</a><a class="navbar__item navbar__link" href="/z3guide/playground/Freeform Editing">Playground</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/z3guide" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/z3guide/programming/Z3 JavaScript Examples">Z3 JavaScript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/z3guide/programming/Z3 Python - Readonly/Introduction">Z3 Python - Readonly</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/z3guide/programming/Z3 Python - Readonly/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/programming/Z3 Python - Readonly/advanced">Advanced Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/programming/Z3 Python - Readonly/Strategies">Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/z3guide/programming/Z3 Python - Readonly/Fixedpoints">Fixedpoints</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/z3guide/programming/Example Programs/Cores and Satisfying Subsets">Example Programs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/z3guide/programming/Parameters">Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/z3guide/programming/API Reference">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/z3guide/programming/Proof Logs">Proof Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/z3guide/programming/Local Search">Local Search</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/z3guide/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Z3 Python - Readonly</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Z3 API in Python</h1></header>
<p>This tutorial demonstrates the main capabilities of Z3Py: the Z3 API in <a href="http://www.python.org" target="_blank" rel="noopener noreferrer">Python</a>. There are many benefits to using, Z3Py. First, it is much more familiar to individuals who have seen programming languages before, but have never seen functional languages like Z3.<br>
<!-- -->No Python background is needed to read and following along with this tutorial. However, it is useful to learn Python (a fun language!) at some point for other purposes. There are many excellent free resources for doing so <a href="http://docs.python.org/tutorial/" target="_blank" rel="noopener noreferrer">Python Tutorial</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Z3 distribution also contains the <strong>C</strong>, <strong>C++</strong>, <strong>.Net</strong>, <strong>Java</strong>, <strong>Julia</strong>, <strong>JS</strong> and <strong>OCaml</strong> APIs.
The source code of Z3Py is available in the Z3 distribution, feel free to modify it to meet your needs.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><a href="https://z3prover.github.io/papers/programmingz3.html" target="_blank" rel="noopener noreferrer">The following guide on <em>Programming Z3</em> is available as a reference</a></p></div></div>
<p>In the present form this tutorial is static. You can run the examples locally by copying the text into a python interpreter where you have imported z3.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-z3py-locally">Using Z3Py Locally<a href="#using-z3py-locally" class="hash-link" aria-label="Direct link to Using Z3Py Locally" title="Direct link to Using Z3Py Locally">​</a></h3>
<p>The Python bindings are available from pypi. You can install them using the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    pip install z3-solver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<p>Let us start with the following simple example:</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The function <code>Int(&#x27;x&#x27;)</code> creates an integer variable in Z3 named <code>x</code>.
The <code>solve</code> function solves a system of constraints. The example above uses
two variables <code>x</code> and <code>y</code>, and three constraints:</p>
<ul>
<li>x must be greater than 2</li>
<li>y must be less than 10</li>
<li>when x is added to twice the value of y, it must equal 7</li>
</ul>
<p>Z3Py like Python uses <code>=</code> for assignment. The operators <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>==</code> and <code>!=</code> for comparison.
In the example above, the expression <code>x + 2*y  == 7</code> is a Z3 constraint.
Z3 can solve and crunch formulas.</p>
<p>The next examples show how to use the Z3 formula/expression simplifier.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>By default, Z3Py (for the web) displays formulas and expressions using mathematical notation.
As usual, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∧</mo></mrow><annotation encoding="application/x-tex">\wedge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em"></span><span class="mord">∧</span></span></span></span> is the logical and, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∨</mo></mrow><annotation encoding="application/x-tex">\vee</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em"></span><span class="mord">∨</span></span></span></span> is the logical or, and so on.
The command <code>set_option(html_mode=False)</code> makes all formulas and expressions to be
displayed in Z3Py notation. This is also the default mode for the offline version of Z3Py that
comes with the Z3 distribution.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Z3 provides functions for traversing expressions.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Z3 provides all basic mathematical operations. Z3Py uses the same operator precedence of the Python language.
Like Python, <code>**</code> is the power operator. Z3 can solve nonlinear <em>polynomial</em> constraints.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The procedure <code>Real(&#x27;x&#x27;)</code> creates the real variable <code>x</code>.
Z3Py can represent arbitrarily large integers, rational numbers (like in the example above),
and irrational algebraic numbers. An irrational algebraic number is a root of a polynomial with integer coefficients.
Internally, Z3 represents all these numbers precisely.
Irrational numbers are displayed in decimal notation for making it easy to read the results.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The procedure <code>set_option</code> is used to configure the Z3 environment. It is used to set global configuration options
such as how the result is displayed. The option <code>set_option(precision=30)</code> sets the number of decimal places used when displaying results.
The <code>?</code> mark in <code>1.2599210498?</code> indicates the output is truncated.</p>
<p>The following example demonstrates a common mistake. The expression <code>3/2</code> is a Python integer and not a Z3 rational number.
The example also shows different ways to create rational numbers in Z3Py. The procedure <code>Q(num, den)</code> creates a
Z3 rational where <code>num</code> is the numerator and <code>den</code> is the denominator. The <code>RealVal(1)</code> creates a Z3 real number
representing the number <code>1</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Rational numbers can also be displayed in decimal notation.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>A system of constraints may not have a solution. In this case, we say the system is <strong>unsatisfiable</strong>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Like in Python, comments begin with the hash character <code>#</code> and are terminated by the end of line.
Z3Py does not support comments that span more than one line.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="boolean-logic">Boolean Logic<a href="#boolean-logic" class="hash-link" aria-label="Direct link to Boolean Logic" title="Direct link to Boolean Logic">​</a></h2>
<p>Z3 supports Boolean operators: <code>And</code>, <code>Or</code>, <code>Not</code>, <code>Implies</code> (implication),
<code>If</code> (if-then-else). Bi-implications are represented using equality <code>==</code>.
The following example shows how to solve a simple set of Boolean constraints.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The Python Boolean constants <code>True</code> and <code>False</code> can be used to build Z3 Boolean expressions.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The following example uses a combination of polynomial and Boolean constraints.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="solvers">Solvers<a href="#solvers" class="hash-link" aria-label="Direct link to Solvers" title="Direct link to Solvers">​</a></h2>
<p>Z3 provides different solvers. The command <code>solve</code>, used in the previous examples, is implemented using the Z3 solver API.
The implementation can be found in the file <code>z3.py</code> in the Z3 distribution.
The following example demonstrates the basic Solver API.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The command <code>Solver()</code> creates a general purpose solver. Constraints can be added using the method <code>add</code>.
We say the constraints have been <strong>asserted</strong> in the solver. The method <code>check()</code> solves the asserted constraints.
The result is <code>sat</code> (satisfiable) if a solution was found. The result is <code>unsat</code> (unsatisfiable) if
no solution exists. We may also say the system of asserted constraints is <strong>infeasible</strong>. Finally, a solver may fail
to solve a system of constraints and <code>unknown</code> is returned.</p>
<p>In some applications, we want to explore several similar problems that share several constraints.
We can use the commands <code>push</code> and <code>pop</code> for doing that.
Each solver maintains a stack of assertions. The command <code>push</code> creates a new scope by
saving the current stack size.
The command <code>pop</code> removes any assertion performed between it and the matching <code>push</code>.
The <code>check</code> method always operates on the content of solver assertion stack.</p>
<p>The following example shows an example that Z3 cannot solve. The solver returns <code>unknown</code> in this case.
Recall that Z3 can solve nonlinear polynomial constraints, but <code>2**x</code> is not a polynomial.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The following example shows how to traverse the constraints asserted into a solver, and how to collect performance statistics for
the <code>check</code> method.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The command <code>check</code> returns <code>sat</code> when Z3 finds a solution for the set of asserted constraints.
We say Z3 <strong>satisfied</strong> the set of constraints. We say the solution is a <strong>model</strong> for the set of asserted
constraints. A model is an <strong>interpretation</strong> that makes each asserted constraint <strong>true</strong>.
The following example shows the basic methods for inspecting models.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>In the example above, the function <code>Reals(&#x27;x y z&#x27;)</code> creates the variables. <code>x</code>, <code>y</code> and <code>z</code>.
It is shorthand for:</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The expression <code>m[x]</code> returns the interpretation of <code>x</code> in the model <code>m</code>.
The expression <code>&quot;%s = %s&quot; % (d.name(), m[d])</code> returns a string where the first <code>%s</code> is replaced with
the name of <code>d</code> (i.e., <code>d.name()</code>), and the second <code>%s</code> with a textual representation of the
interpretation of <code>d</code> (i.e., <code>m[d]</code>). Z3Py automatically converts Z3 objects into a textual representation
when needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arithmetic">Arithmetic<a href="#arithmetic" class="hash-link" aria-label="Direct link to Arithmetic" title="Direct link to Arithmetic">​</a></h2>
<p>Z3 supports real and integer variables. They can be mixed in a single problem.
Like most programming languages, Z3Py will automatically add coercions converting integer expressions to real ones when needed.
The following example demonstrates different ways to declare integer and real variables.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The function <code>ToReal</code> casts an integer expression into a real expression.</p>
<p>Z3Py supports all basic arithmetic operations.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The command <code>simplify</code> applies simple transformations on Z3 expressions.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The command <code>help_simplify()</code> prints all available options.
Z3Py allows users to write option in two styles. The Z3 internal option names start with <code>:</code> and words are separated by <code>-</code>.
These options can be used in Z3Py. Z3Py also supports Python-like names,
where <code>:</code> is suppressed and <code>-</code> is replaced with <code>_</code>.
The following example demonstrates how to use both styles.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Z3Py supports arbitrarily large numbers. The following example demonstrates how to perform basic arithmetic using larger integer, rational and irrational numbers.
Z3Py only supports <a href="http://en.wikipedia.org/wiki/Algebraic_number" target="_blank" rel="noopener noreferrer">algebraic irrational numbers</a>. Algebraic irrational numbers are sufficient for presenting the solutions of systems of polynomial constraints.
Z3Py will always display irrational numbers in decimal notation since it  is more convenient to read. The internal representation can be extracted using the method <code>sexpr()</code>.
It displays Z3 internal representation for mathematical formulas and expressions in <a href="http://en.wikipedia.org/wiki/S-expression" target="_blank" rel="noopener noreferrer">s-expression</a> (Lisp-like) notation.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="machine-arithmetic">Machine Arithmetic<a href="#machine-arithmetic" class="hash-link" aria-label="Direct link to Machine Arithmetic" title="Direct link to Machine Arithmetic">​</a></h2>
<p>Modern CPUs and main-stream programming languages use
arithmetic over fixed-size bit-vectors.
Machine arithmetic is available in Z3Py as <i>Bit-Vectors</i>.
They implement the
precise semantics of unsigned and of
signed <a href="http://en.wikipedia.org/wiki/Two&#x27;s_complement" target="_blank" rel="noopener noreferrer">two-complements arithmetic</a>.</p>
<p>The following example demonstrates how to create bit-vector variables and constants.
The function <code>BitVec(&#x27;x&#x27;, 16)</code> creates a bit-vector variable in Z3 named <code>x</code> with <code>16</code> bits.
For convenience, integer constants can be used to create bit-vector expressions in Z3Py.
The function <code>BitVecVal(10, 32)</code> creates a bit-vector of size <code>32</code> containing the value <code>10</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>In contrast to programming languages, such as C, C++, C#, Java,
there is no distinction between signed and unsigned bit-vectors
as numbers. Instead, Z3 provides special signed versions of arithmetical operations
where it makes a difference whether the bit-vector is treated as signed or unsigned.
In Z3Py, the operators
<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>/</code>, <code>%</code> and <code>&gt;&gt;;</code> correspond to the signed versions.
The corresponding unsigned operators are
<code>ULT</code>, <code>ULE</code>, <code>UGT</code>, <code>UGE</code>, <code>UDiv</code>, <code>URem</code> and <code>LShR</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The operator <code>&gt;&gt;</code> is the arithmetic shift right, and
<code>&lt;&lt;</code> is the shift left. The logical shift right is the operator <code>LShR</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2>
<p>Unlike programming languages, where functions have side-effects, can throw exceptions,
or never return, functions in Z3 have no side-effects and are <strong>total</strong>.
That is, they are defined on all input values. This includes functions, such
as division. Z3 is based on <a href="http://en.wikipedia.org/wiki/First-order_logic" target="_blank" rel="noopener noreferrer">first-order logic</a>.</p>
<p>Given a constraint such as <code>x + y &gt; 3</code>, we have been saying that <code>x</code> and <code>y</code>
are variables. In many textbooks, <code>x</code> and <code>y</code> are called uninterpreted constants.
That is, they allow any interpretation that is consistent with the constraint <code>x + y &gt; 3</code>.</p>
<p>More precisely, function and constant symbols in pure first-order logic are <i>uninterpreted</i> or <i>free</i>,
which means that no a priori interpretation is attached.
This is in contrast to functions belonging to the signature of theories,
such as arithmetic where the function <code>+</code> has a fixed standard interpretation
(it adds two numbers). Uninterpreted functions and constants are maximally flexible;
they allow any interpretation that is consistent with the constraints over the function or constant.</p>
<p>To illustrate uninterpreted functions and constants let us define the uninterpreted integer constants (aka variables)
<code>x</code>, <code>y</code>. Finally, let <code>f</code> be an uninterpreted function that takes one argument of type (aka sort) integer
and results in an integer value.
The example illustrates how one can force an interpretation where <code>f</code>
applied twice to <code>x</code> results in <code>x</code> again, but <code>f</code> applied once to <code>x</code> is different from <code>x</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>The solution (interpretation) for <code>f</code> should be read as <code>f(0)</code> is <code>1</code>, <code>f(1)</code> is <code>0</code>, and <code>f(a)</code>
is <code>1</code> for all <code>a</code> different from <code>0</code> and <code>1</code>.</p>
<p>In Z3, we can also evaluate expressions in the model for a system of constraints. The following example shows how to
use the <code>evaluate</code> method.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="satisfiability-and-validity">Satisfiability and Validity<a href="#satisfiability-and-validity" class="hash-link" aria-label="Direct link to Satisfiability and Validity" title="Direct link to Satisfiability and Validity">​</a></h2>
<p>A formula/constraint <code>F</code> is <strong>valid</strong> if <code>F</code> always evaluates to true for any assignment of appropriate values to its
uninterpreted symbols.
A formula/constraint <code>F</code> is <strong>satisfiable</strong> if there is some assignment of appropriate values
to its uninterpreted  symbols under which <code>F</code> evaluates to true.
Validity is about finding a proof of a statement; satisfiability is about finding a solution to a set of constraints.
Consider a formula <code>F</code> containing <code>a</code> and <code>b</code>.
We can ask whether <code>F</code> is valid, that is whether it is always true for any combination of values for
<code>a</code> and <code>b</code>. If <code>F</code> is always
true, then <code>Not(F)</code> is always false, and then <code>Not(F)</code> will not have any satisfying assignment (i.e., solution); that is,
<code>Not(F)</code> is unsatisfiable. That is,
<code>F</code> is valid precisely when <code>Not(F)</code> is not satisfiable (is unsatisfiable).
Alternately,
<code>F</code> is satisfiable if and only if <code>Not(F)</code> is not valid (is invalid).
The following example proves the deMorgan&#x27;s law.</p>
<p>The following example redefines the Z3Py function <code>prove</code> that receives a formula as a parameter.
This function creates a solver, adds/asserts the negation of the formula, and checks if the negation is unsatisfiable.
The implementation of this function is a simpler version of the Z3Py command <code>prove</code>.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-comprehensions">List Comprehensions<a href="#list-comprehensions" class="hash-link" aria-label="Direct link to List Comprehensions" title="Direct link to List Comprehensions">​</a></h2>
<p>Python supports <a href="http://docs.python.org/tutorial/datastructures.html#list-comprehensions" target="_blank" rel="noopener noreferrer">list comprehensions</a>.
List comprehensions provide a concise way to create lists. They can be used to create Z3 expressions and problems in Z3Py.
The following example demonstrates how to use Python list comprehensions in Z3Py.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>In the example above, the expression <code>&quot;x%s&quot; % i</code> returns a string where <code>%s</code> is replaced with the value of <code>i</code>.</p>
<p>The command <code>pp</code> is similar to <code>print</code>, but it uses Z3Py formatter for lists and tuples instead of Python&#x27;s formatter.</p>
<p>Z3Py also provides functions for creating vectors of Boolean, Integer and Real variables. These functions
are implemented using list comprehensions.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kinematic-equations">Kinematic Equations<a href="#kinematic-equations" class="hash-link" aria-label="Direct link to Kinematic Equations" title="Direct link to Kinematic Equations">​</a></h2>
<p>In high school, students learn the kinematic equations.
These equations describe the mathematical relationship between <strong>displacement</strong> (<code>d</code>),
<strong>time</strong> (<code>t</code>), <strong>acceleration</strong> (<code>a</code>), <strong>initial velocity</strong> (<code>v_i</code>) and <strong>final velocity</strong> (<code>v_f</code>).
In Z3Py notation, we can write these equations as:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   d == v_i * t + (a*t**2)/2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   v_f == v_i + a*t</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="problem-1">Problem 1<a href="#problem-1" class="hash-link" aria-label="Direct link to Problem 1" title="Direct link to Problem 1">​</a></h3>
<p>Ima Hurryin is approaching a stoplight moving with a velocity of <code>30.0</code> m/s.
The light turns yellow, and Ima applies the brakes and skids to a stop.
If Ima&#x27;s acceleration is <code>-8.00</code> m/s<sup>2</sup>, then determine the displacement of the
car during the skidding process.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="problem-2">Problem 2<a href="#problem-2" class="hash-link" aria-label="Direct link to Problem 2" title="Direct link to Problem 2">​</a></h3>
<p>Ben Rushin is waiting at a stoplight. When it finally turns green, Ben accelerated from rest at a rate of
a <code>6.00</code> m/s<sup>2</sup> for a time of <code>4.10</code> seconds. Determine the displacement of Ben&#x27;s car during this time period.</p>
<div><div class="buttons_Vg2Y"></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bit-tricks">Bit Tricks<a href="#bit-tricks" class="hash-link" aria-label="Direct link to Bit Tricks" title="Direct link to Bit Tricks">​</a></h2>
<p>Some low level <a href="http://graphics.stanford.edu/~seander/bithacks.html" target="_blank" rel="noopener noreferrer">hacks</a> are very popular with C programmers.
We use some of these hacks in the Z3 implementation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="power-of-two">Power of two<a href="#power-of-two" class="hash-link" aria-label="Direct link to Power of two" title="Direct link to Power of two">​</a></h3>
<p>This hack is frequently used in C programs (Z3 included) to test whether a machine integer is a power of two.
We can use Z3 to prove it really works. The claim is that <code>x != 0 &amp;&amp; !(x &amp; (x - 1))</code> is true if and only if <code>x</code>
is a power of two.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opposite-signs">Opposite signs<a href="#opposite-signs" class="hash-link" aria-label="Direct link to Opposite signs" title="Direct link to Opposite signs">​</a></h3>
<p>The following simple hack can be used to test whether two machine integers have opposite signs.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="puzzles">Puzzles<a href="#puzzles" class="hash-link" aria-label="Direct link to Puzzles" title="Direct link to Puzzles">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dog-cat-and-mouse">Dog, Cat and Mouse<a href="#dog-cat-and-mouse" class="hash-link" aria-label="Direct link to Dog, Cat and Mouse" title="Direct link to Dog, Cat and Mouse">​</a></h3>
<p>Consider the following puzzle. Spend exactly 100 dollars and buy exactly 100 animals.
Dogs cost 15 dollars, cats cost 1 dollar, and mice cost 25 cents each.
You have to buy at least one of each.
How many of each should you buy?</p>
<div><div class="buttons_Vg2Y"></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sudoku">Sudoku<a href="#sudoku" class="hash-link" aria-label="Direct link to Sudoku" title="Direct link to Sudoku">​</a></h3>
<p><a href="http://www.dailysudoku.com/sudoku/" target="_blank" rel="noopener noreferrer">Sudoku</a> is a very popular puzzle.
The goal is to insert the numbers in the boxes to satisfy only one condition: each row, column and
<code>3x3</code> box must contain the digits <code>1</code> through <code>9</code> exactly once.</p>
<p>The following example encodes the sudoku problem in Z3. Different sudoku instances can be solved
by modifying the matrix <code>instance</code>. This example makes heavy use of
<a href="http://docs.python.org/tutorial/datastructures.html#list-comprehensions" target="_blank" rel="noopener noreferrer">list comprehensions</a>
available in the Python programming language.</p>
<div><div class="buttons_Vg2Y"></div><div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eight-queens">Eight Queens<a href="#eight-queens" class="hash-link" aria-label="Direct link to Eight Queens" title="Direct link to Eight Queens">​</a></h3>
<p>The eight queens puzzle is the problem of placing eight chess queens on an 8x8 chessboard so that no two queens attack each other.
Thus, a solution requires that no two queens share the same row, column, or diagonal.</p>
<div><div class="buttons_Vg2Y"></div><div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-install-problem">Application: Install Problem<a href="#application-install-problem" class="hash-link" aria-label="Direct link to Application: Install Problem" title="Direct link to Application: Install Problem">​</a></h2>
<p>The <strong>install problem</strong> consists of determining whether a new set of packages can be installed in a system.
This application is based on the article
<a href="http://cseweb.ucsd.edu/~rjhala/papers/opium.pdf" target="_blank" rel="noopener noreferrer">OPIUM: Optimal Package Install/Uninstall Manager</a>.
Many packages depend on other packages to provide some functionality.
Each distribution contains a meta-data file that
explicates the requirements of each package of the distribution.
The meta-data contains details like the name, version, etc. More importantly, it contains
<strong>depends</strong> and <strong>conflicts</strong>
clauses that stipulate which other packages should be on the
system. The depends clauses stipulate which other packages must be present.
The conflicts clauses stipulate which other packages must not be present.</p>
<p>The install problem can be easily solved using Z3. The idea is to define a Boolean variable for each
package. This variable is true if the package must be in the system. If package <code>a</code> depends on
packages <code>b</code>, <code>c</code> and <code>z</code>, we write:</p>
<div><div class="buttons_Vg2Y"></div><div></div></div>
<p><code>DependsOn</code> is a simple Python function that creates Z3 constraints that capture the
depends clause semantics.</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Thus, <code>DependsOn(a, [b, c, z])</code> generates the constraint</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">And(Implies(a, b), Implies(a, c), Implies(a, z))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That is, if users install package <code>a</code>, they must also install packages
<code>b</code>, <code>c</code> and <code>z</code>.</p>
<p>If package <code>d</code> conflicts with package <code>e</code>, we write <code>Conflict(d, e)</code>.
<code>Conflict</code> is also a simple Python function.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def Conflict(p1, p2):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Or(Not(p1), Not(p2))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Conflict(d, e)</code> generates the constraint <code>Or(Not(d), Not(e))</code>.
With these two functions, we can easily encode the example in the
<a href="http://cseweb.ucsd.edu/~rjhala/papers/opium.pdf" target="_blank" rel="noopener noreferrer">Opium article</a> (Section 2) in Z3Py as:</p>
<div><div class="buttons_Vg2Y"><button class="button button--primary">Run</button></div><div></div></div>
<p>Note that the example contains the constraint</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DependsOn(c, [Or(d, e), Or(f, g)]),</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The meaning is: to install <code>c</code>, we must install <code>d</code> or <code>e</code>, and <code>f</code> or <code>g</code></p>
<p>Now, we refine the previous example. First, we modify <code>DependsOn</code> to allow
us to write <code>DependsOn(b, d)</code> instead of <code>DependsOn(b, [d])</code>. We also
write a function <code>install_check</code> that returns a list of packages that must be installed
in the system. The function <code>Conflict</code> is also modified. It can now receive multiple
arguments.</p>
<div><div class="buttons_Vg2Y"></div><div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/z3guide/tree/main/website/docs-programming/02 - Z3 Python - Readonly/01 - Introduction.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/z3guide/programming/Z3 JavaScript Examples"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Z3 JavaScript</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/z3guide/programming/Z3 Python - Readonly/advanced"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced Topics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-z3py-locally" class="table-of-contents__link toc-highlight">Using Z3Py Locally</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#boolean-logic" class="table-of-contents__link toc-highlight">Boolean Logic</a></li><li><a href="#solvers" class="table-of-contents__link toc-highlight">Solvers</a></li><li><a href="#arithmetic" class="table-of-contents__link toc-highlight">Arithmetic</a></li><li><a href="#machine-arithmetic" class="table-of-contents__link toc-highlight">Machine Arithmetic</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#satisfiability-and-validity" class="table-of-contents__link toc-highlight">Satisfiability and Validity</a></li><li><a href="#list-comprehensions" class="table-of-contents__link toc-highlight">List Comprehensions</a></li><li><a href="#kinematic-equations" class="table-of-contents__link toc-highlight">Kinematic Equations</a><ul><li><a href="#problem-1" class="table-of-contents__link toc-highlight">Problem 1</a></li><li><a href="#problem-2" class="table-of-contents__link toc-highlight">Problem 2</a></li></ul></li><li><a href="#bit-tricks" class="table-of-contents__link toc-highlight">Bit Tricks</a><ul><li><a href="#power-of-two" class="table-of-contents__link toc-highlight">Power of two</a></li><li><a href="#opposite-signs" class="table-of-contents__link toc-highlight">Opposite signs</a></li></ul></li><li><a href="#puzzles" class="table-of-contents__link toc-highlight">Puzzles</a><ul><li><a href="#dog-cat-and-mouse" class="table-of-contents__link toc-highlight">Dog, Cat and Mouse</a></li><li><a href="#sudoku" class="table-of-contents__link toc-highlight">Sudoku</a></li><li><a href="#eight-queens" class="table-of-contents__link toc-highlight">Eight Queens</a></li></ul></li><li><a href="#application-install-problem" class="table-of-contents__link toc-highlight">Application: Install Problem</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Z3</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://z3prover.github.io/papers/programmingz3.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Programming Z3 in Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Z3Prover/z3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Z3 on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/z3guide/Acknowledgments">Acknowledgments</a></li></ul></div><div class="col footer__col"><div class="footer__title">Z3 Material</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://z3prover.github.io/api/html/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li><li class="footer__item"><a href="https://z3prover.github.io/slides" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slides<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/z3prover/z3/wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Stay Connected</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/z3guide" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/RiSE_MSR" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/research/group/research-software-engineering-rise/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RiSE @ MSR<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy &amp; Cookies<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/copyright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a href="https://github.com/microsoft/z3guide/commit/9d3fe1c10f5323f0b1f2811a48bb603c957a58ab" target="_blank" rel="noopener noreferrer">9d3fe1c1</a> | <a href="https://www.npmjs.com/package/z3-solver/v/4.12.1" target="_blank" rel="noopener noreferrer">z3-solver 4.12.1</a> | Copyright © 2025 Microsoft Corporation.</div></div></div></footer></div>
</body>
</html>